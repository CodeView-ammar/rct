{% load static %}
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
    <title>Invoice</title>
    <style type="text/css">
        * {margin: 0;
            padding: 0;}

        body {background: #ffffff;
            font: 12px "Tahoma", Arial, Helvetica, sans-serif;
            direction: rtl;
            text-align: right;}

        .invoice-wrap {width: 660px;
            margin: 0 auto;
            background: #FFF;
            color: #000}

        .invoice-inner {margin: 0 30px;
            padding: 20px 0}

        .listing-table th {background-color: #e5e5e5;
            border-bottom: 1px solid #555555;
            border-top: 1px solid #555555;
            font-weight: bold;
            text-align: right;
            padding: 6px 4px}

        .listing-table td {border-bottom: 1px solid #555555;
            text-align: right;
            padding: 5px 6px;
            vertical-align: top}

        .total-table td {border-right: 1px solid #555555;}

        .total-row {background-color: #e5e5e5;
            border-bottom: 1px solid #555555;
            border-top: 1px solid #555555;
            font-weight: bold;}

        .row-items {margin: 5px 0;
            display: block}

        .bold_title {font-weight: bold;}

        .strong_tag {font-weight: bold;}

        .big_title {font-size: 18px;
            font-weight: 100}

        .notes-block {margin: 50px 0 0 0}

        tr,
        td,
        th {page-break-inside: avoid !important;}
    </style>
    <link rel="stylesheet" type="text/css" href="/css/edit-layout.css">
</head>
<body id="" style="background: rgb(195, 195, 195); padding: 20px;">
    <style>
  
</style>
<div class="booking" style="font-size: large;">
<div class="row" id="head_titleR">
<div class="col-md-12 col-sm-12" style="text-align: right;">
<div class="row">
<div class="col-md-4 col-sm-4" >

  
  
</div>
<div class="col-md-4 col-sm-4" >
  <img id="logo_report" src="/media/{{data.branch__company__image}}"  style="
    width: 150px;
    height: 156px;
    border: none;
    margin-bottom: 3%;
    margin-right: 58px;
  ">
  <p style="font-weight: bold;margin-right: 80px;margin-top: 16px;">فاتورة ضريبية</p>
  
</div>
<div class="col-md-4 col-sm-4" style="text-align: end;">
</div>
</div>

<div class="row header-info" style="margin-top: 1rem;">
<div class="col-md-4 col-sm-4" >

  <lable style='font-weight: bold;'>المنتج الأساسي</lable>
  <p id='branch__company__tax_number'><lable style='font-weight: bold;'>الرقم الضريبي </lable>{{data.branch__tax_number}}</p>
  <p id="commercial_register"><lable style='font-weight: bold;'>السجل التجاري: </lable> {{data.branch__company_register}}</p>
  
  <p id="number_R"><lable style='font-weight: bold;'>رقم الفاتورة </lable>{{data.number}}</p>
  <p id="date_bill_R"><lable style='font-weight: bold;'>تاريخ الفاتور </lable> {{ data.date_bill|date:"Y-m-d" }}</p>
  <p id="date_of_supply"><lable style='font-weight: bold;'>تاريخ التوريد </lable>{{ data.date_bill|date:"Y-m-d" }}</p>
  <p id="name_report_Ar">فــاتورة بــيع</p>
  
</div>
<div class="col-md-4 col-sm-4" >
  
  <p id="user_input"><lable style='font-weight: bold;'>اسم المستخدم </lable> 
    {% if created_by_id__emplayee_id__EmployeeName %}
      {{data.created_by_id__emplayee_id__EmployeeName}}
    {% else %}
      {{data.created_by__username}}  
    {% endif %} </p>
  <p id="customer_data__name_ar"><lable style='font-weight: bold;'>اسم العميل </lable>{{data.customer_data__name_ar}}</p>
  <lable style='font-weight: bold;'>اسم البائع</lable>
  <p id="customer_data__vat_number"><lable style='font-weight: bold;'>الرقم الضريبي للعميل </lable>{{data.customer_data__vat_number}}</p>  
  <p id="customer_data__address"><lable style='font-weight: bold;'>عنوان موقع العميل </lable>{{data.customer_data__address}}</p>
  <p id="Stor_R"><lable style='font-weight: bold;'>المخزن </lable>{{data.detailsalesbill__store__name}}</p>

  
</div>
<div class="col-md-4 col-sm-4" style="text-align: end;">
<img id="qr_code" width="192px" height="192px" alt="" style="height: 230px;width: 230px;" src="/media/{{invoiceQR}}">

</div>
</div>


</div>
</div>


<!-- #region  head number 2-->
<div class="row">
<div class="col-md-4 col-sm-4" style="text-align: right;padding: 21px 30px 0 0;">

</div>

<div class="col-md-4 col-sm-4" >
</div>      
<div class="col-md-4 col-sm-4" >
</div>
</div>
<!-- endregion -->


<div class="row">

<div class="col-md-12 col-sm-12" style="
text-align: right;
margin: 13px;">
<style>


.table-container {
overflow: auto;
}

table {
border-collapse: collapse;
width: 95%;
}

th, td {
border: 1px solid #ddd;
padding: 8px;
text-align: right;
}
th {
background-color: #e0e0e0;
text-align: right;
}

tr:nth-child(even) {
background-color: #f9f9f9;
}

#totals {
margin-top: 20px;
text-align: right;
}
td{
text-align:center;

}
#table_report_>thead>tr>th>p {
margin-top: 0;
margin-bottom: 0rem;
}
#totals p {
margin-bottom: 5px;
}
#totals {
margin-top: 0px;
text-align: center;
border-top: 2px solid #ccc;
padding-top: 10px;
margin-right: 0%;
border-bottom: 2px solid #ccc;
width: 95%;
}
#totals p {
margin-bottom: 5px;
}
@media print {
body {
margin: 0;
}

/* إخفاء عناصر غير ضرورية للطباعة */
.no-print {
display: none;
}
}
</style>
<div id="table_report" style="
font-size: large;
">
<table id="table_report_">
<thead>
<tr>
<th>الرقم</th>
<th>اسم المنتج</th>
<th>سعر الوحدة</th>
<th >
<p>الكمية</p>
</th>
<th>
<p>الخصم</p>
<p></p>
</th>
<th>
<p>إجمالي</p>
<p>(غير شامل الضريبة)</p>
</th>
<th>
<p>معدل الضريبة</p>
<p></p>
</th>
<th>
<p>مبلغ الضريبة</p>
<p></p>
</th>
<th>
<p>إجمالي المبلغ</p>
<p></p>
</th>
</tr>
</thead>

<tbody>
<td>item.item_number</td>
<td>item.item_name_ar</td>
<td class="item_price">item.price</td>
<td class="item_quantity">item.quantity</td>
<td>item.discount</td>
<td class="total_price"></td>
<td>item.tax__tax_rate</td>
<td class="total_tax">item.total</td>
<td class="total_invo">item.total</td>
<script>
$(document).ready(function() {
$(".total_price").each(function() {
var price = parseFloat($(this).siblings(".item_price").text());
var quantity = parseFloat($(this).siblings(".item_quantity").text());
var total_tax = parseFloat($(this).siblings(".total_tax").text());
var total_invo = parseFloat($(this).siblings(".total_invo").text());
var total = price * quantity;
// $(this).text(total);
$(this).siblings(".total_tax").text(parseFloat(total_invo)-parseFloat($(this).text()))
});
});
</script>
</tbody>
</table>
</div>

<div class="row">
<div class="col-md-12 col-sm-12">
<style>
table {
    border-collapse: collapse;
}

.footer>th, .footer>td {
    border: 1px solid #ffffff;
    padding: 10px;
    text-align: center;
}

th {
    background-color: #e0e0e0;
    font-weight: bold;
}

tr:nth-child(even) {
    background-color: #f9f9f9;
}

.footer tr td:first-child {
    text-align: left;
}
</style>

<table class="footer" style="margin-top: 11px;">

<tr>
<td style="font-weight: bold;">الإجمالي غير شامل الضريبة</td>
<td><label id="total_R">{{data.total}} {{data.currency__currency_code}}</label></td>
</tr>
<tr>
<td style="font-weight: bold;">إجمالي الخصم</td>
{% if data.discount %} <td>{{data.discount}} {{data.currency__currency_code}}</td>{% else %}
<td>0 {{data.currency__currency_code}}</td>{% endif %}
</tr>
<tr>
<td style="font-weight: bold;">الخصومات الأخرى</td>
{% if data.discount_item %} <td>{{data.discount_item}} {{data.currency__currency_code}}</td></td>{% else %}
<td>0 {{data.currency__currency_code}}</td>{% endif %}

</tr>
<tr>
<td style="font-weight: bold;">قيمة الضريبة</td>
<td><label id="burdens_taxes_R">{{data.total_taxes}} {{data.currency__currency_code}}</label></td>
</tr>
<tr>
<td style="font-weight: bold;">ضريبة القيمة المضافة %</td>
<td><label id="discount_presentg_R">{{header.tax__tax_rate}}</label></td>
</tr>
<tr>
<td style="font-weight: bold;">الإجمالي شامل الضريبة</td>
<td><label class="final_total_R">{{data.final_total}} {{data.currency__currency_code}}</label></td>
</tr>

</table>
</div>
</div>
<div class="row" id="totals" style="font-size: initial;">

<div class="col-md-6 col-sm-6" >
<p id="type_py_report" style="
text-align: right;
">
المبلغ المدفوع  ({{data.payment_method}})
</p>


</div>

<div class="col-md-6 col-sm-6" >

<td><label class="final_total_R">{{data.final_total}} {{data.currency__currency_code}}</label></td>

</div>


</div>

<div class="row" style="font-size: initial;text-align: right;">
<div class="col-md-4 col-sm-4">
<p id="branch__name_ar">{{data.branch__name_ar}}</p>
</div>
  <div class="col-md-8 col-sm-8">
مصرف الرجحي (SA4480000475608016356657)

</div>
</div>

</div>
</div>  
</div>

</body>

</html>